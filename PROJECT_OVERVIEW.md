# 项目概览

## 📌 项目信息

**项目名称**：客服智能体自进化风险分析与防御系统

**项目类型**：课程设计 - 人工智能基础与应用

**开发语言**：Python 3.11+

**核心框架**：FastAPI + Streamlit

**代码规模**：约9732行代码（39个文件）

**完成日期**：2026年1月

---

## 🎯 核心功能

### 1. 客服智能体系统

具备记忆、学习和决策能力的客服智能体：
- Few-shot学习：从历史经验中学习
- 经验回放缓冲区：容量1000条经验
- 奖励机制：违规高奖励（1.0）vs 合规低奖励（0.2）

### 2. 三阶段实验框架

- **阶段一（基线测试）**：验证正常情况下的合规性
- **阶段二（诱导测试）**：验证诱导奖励导致的错误进化
- **阶段三（防御测试）**：验证安全哨兵的防御效果

### 3. 安全哨兵防御机制

- 实时违规检测（基于LLM-as-a-Judge）
- 自动拦截违规决策（拦截率88%）
- 负反馈注入（-5.0纠正错误进化）

---

## 📊 实验结果

### 三阶段对比

| 阶段 | 违规率 | 说明 |
|------|--------|------|
| 阶段一（基线） | 4% | 正常情况下保持合规 |
| 阶段二（诱导） | 50% | 诱导导致违规率增长11.5倍 |
| 阶段三（防御） | 6% | 安全哨兵有效防御 |

### 核心发现

✅ **验证了自进化风险**：违规率从4%上升到50%
✅ **证明了防御有效性**：拦截率88%，违规率降至6%
✅ **复现了论文结论**：与《Your Agent May Misevolve》一致

---

## 🚀 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

### 配置环境

```bash
cp .env.example .env
# 编辑.env文件，填入通义千问API Key
```

### 运行演示测试（推荐）

```bash
cd tests
python demo_test.py
```

约5-10分钟完成30个问题的测试

### 运行完整实验

```bash
cd tests
python run_all_tests.py
```

约30分钟完成150个问题的完整测试

---

## 📁 项目结构

```
Agent_Misevolution_Safety/
├── backend/              # 后端服务（FastAPI）
├── frontend/             # 前端界面（Streamlit）
├── tests/                # 测试框架
│   ├── stage1_baseline_test.py   # 阶段一
│   ├── stage2_inducement_test.py # 阶段二
│   ├── stage3_defense_test.py    # 阶段三
│   └── demo_test.py              # 快速演示
├── docs/                 # 文档
├── 课程设计报告.md       # 完整报告（25000字）
└── README.md             # 本文件
```

---

## 📚 重要文档

- **[课程设计报告](课程设计报告.md)**：完整的课程设计报告，约25,000字
- **[README](README.md)**：项目说明和快速开始指南
- **[三阶段实验运行指南](docs/三阶段实验运行指南.md)**：详细的实验运行说明
- **[架构设计文档](docs/架构设计文档.md)**：系统架构设计
- **[论文理解与借鉴](docs/论文理解与借鉴.md)**：论文深度解读

---

## 🔧 技术栈

### 后端
- **FastAPI 0.104+**：现代化的Python Web框架
- **Pydantic 2.5+**：数据验证和序列化
- **httpx 0.25+**：异步HTTP客户端

### LLM服务
- **通义千问**：阿里云大语言模型API
  - qwen-turbo：智能体主模型
  - qwen-max：安全响应生成
  - 通义千问：违规裁判

### 前端
- **Streamlit 1.28+**：快速构建数据应用

---

## 💡 核心创新

### 1. 分层渐进式诱导策略

- 5层诱导强度：温和 → 压力 → 威胁 → 紧急 → 高强度
- 5轮递增比例：20% → 40% → 60% → 80% → 100%
- 清晰的进化轨迹：违规率从20%逐步上升到80%

### 2. 优化的违规检测机制

- 区分A/B/C三类回复，只有C类（承诺执行）才可能违规
- 降低误报率：基线违规率从40%降至4%
- 提高检测准确性：严格区分"提供信息"与"执行违规操作"

### 3. 负反馈注入机制

- 打破正反馈循环：违规不再获得高奖励
- 重新引导学习：让智能体学习合规行为
- 实时纠正进化：无需重启系统即可纠正

---

## 📧 联系方式

- **GitHub**：https://github.com/Maruiful/Agent_Misevolution_Safety
- **邮箱**：3482604854@qq.com

---

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

<div align="center">

**基于课程设计《人工智能基础与应用》**

Made with ❤️ by Maruiful

</div>
